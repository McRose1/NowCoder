# 锁类型错题

## 一个容器类数据结构，读写平均，使用锁机制保证线程安全。如果要综合提高该数据结构的访问性能，最好的办法是______。
- A. 只对写操作加锁，不对读操作加锁
- B. 读操作不加锁，采用copyOnWrite的方式实现写操作
- C. 分区段加锁
- D. 无法做到

答案：C. 分区段加锁

解析：
- A：只对写操作加锁，不对读操作加锁，会造成读到脏数据
- B：copyOnWrite的核心思想是利用高并发往往是读多写少的特性，对读操作不加锁，对写操作，先复制一份新的集合，在新的集合上面修改，然后将新集合赋值给旧的引用。这里读写平均，不适用
- C：分段加锁，只在影响读写的地方加锁，锁可以用读写锁，可以提高效率

